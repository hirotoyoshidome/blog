<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Running Ruby via Apache</title><meta name="description" content="Steps I took to execute Ruby scripts through Apache on Windows."><!-- OGP --><meta property="og:title" content="Running Ruby via Apache"><meta name="og:description" content="Steps I took to execute Ruby scripts through Apache on Windows."><meta property="og:type" content="website"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Running Ruby via Apache"><meta name="twitter:description" content="Steps I took to execute Ruby scripts through Apache on Windows."><link rel="icon" type="image/png" href="/images/favicon.ico"><link rel="stylesheet" href="/blog/_astro/_page_.C60xkf-5.css"></head> <body class="prose prose-neutral mx-auto p-6">  <main class="max-w-3xl mx-auto px-6 py-10 text-gray-800 leading-relaxed"> <nav aria-label="Breadcrumb" class="text-sm text-gray-500 mb-6"> <ol class="flex flex-wrap items-center gap-2 list-none"> <li><a href="/" class="text-blue-600 hover:underline">Home</a></li> <li aria-hidden="true" class="text-gray-400">/</li> <li><a href="/en/" class="text-blue-600 hover:underline">Posts</a></li> <li aria-hidden="true" class="text-gray-400">/</li> <li class="font-semibold text-gray-700 truncate max-w-[60ch]">Running Ruby via Apache</li> </ol> </nav> <header class="mb-8"> <h1 class="text-4xl font-bold tracking-tight mb-2">Running Ruby via Apache</h1> <div class="flex flex-wrap items-center gap-3 text-sm text-gray-600"> <time datetime="2018-06-16T00:00:00.000Z"> 2018-06-16 </time> </div> <ul class="flex flex-wrap gap-2 mt-4 list-none"> <li class="text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full font-medium">
#engineering </li> </ul> <nav class="text-sm text-gray-600 flex flex-wrap gap-3 mt-4"> <a href="/ja/posts/2018/apache_ruby/" class="text-blue-600 hover:underline flex items-center gap-1"> <span aria-hidden="true">⇄</span> 日本語 </a> </nav> </header> <ul>
<li>2018/06/16</li>
</ul>
<h1 id="i-wanted-to-run-ruby-with-apache">I wanted to run Ruby with Apache</h1>
<p>I wondered if I could execute Ruby files on Apache the same way I run PHP scripts, so I tried it out. No Rails here—just a connectivity check.</p>
<h2 id="environment">Environment</h2>
<ul>
<li>Ruby 2.5.1</li>
<li>Apache 2.4</li>
<li>Windows 10</li>
</ul>
<h2 id="procedure">Procedure</h2>
<p>I assume Apache and Ruby are already installed.</p>
<ol>
<li><strong>Edit <code>httpd.conf</code>.</strong> Open <code>C:\\Apache24\\conf\\httpd.conf</code> in a text editor.</li>
<li><strong>Update directory settings.</strong> Around line 380 you will find:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;Directory "c:/Apache24/cgi-bin"></span></span>
<span class="line"><span>        AllowOverride None</span></span>
<span class="line"><span>        Options None</span></span>
<span class="line"><span>        Require all granted</span></span>
<span class="line"><span>&#x3C;/Directory></span></span>
<span class="line"><span></span></span></code></pre>
<p>Comment that block out and add the following instead:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;Directory "c:/Apache24/htdocs"></span></span>
<span class="line"><span>        AllowOverride All</span></span>
<span class="line"><span>        Options +ExecCGI</span></span>
<span class="line"><span>        Order allow,deny</span></span>
<span class="line"><span>        Allow from all</span></span>
<span class="line"><span>        Require all granted</span></span>
<span class="line"><span>&#x3C;/Directory></span></span>
<span class="line"><span></span></span></code></pre>
<ol start="3">
<li><strong>Enable the CGI handler.</strong> Around line 430 you will see:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>#AddHandler cgi-script .cgi</span></span>
<span class="line"><span></span></span></code></pre>
<p>Add the next line below it:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>AddHandler cgi-script .cgi .rb</span></span>
<span class="line"><span></span></span></code></pre>
<p>Now <code>.rb</code> files will be treated as CGI scripts.</p>
<ol start="4">
<li><strong>Place the Ruby file.</strong> Put your file under <code>C:\\Apache24\\htdocs</code> and write it like this:</li>
</ol>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>#!C:/Ruby25-x64/bin/ruby.exe</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Specify the Ruby executable above.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>puts "Content-type: text/html\n\n" # Append \n\n or Apache will throw an error (check the logs).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>puts "&#x3C;html>&#x3C;head>&#x3C;/head>&#x3C;body>Hello&#x3C;/body>&#x3C;/html>"</span></span>
<span class="line"><span></span></span></code></pre>
<p>Make sure the shebang points to your Ruby executable and that you output the <code>Content-type</code> header.</p>
<ol start="5">
<li><strong>Verify.</strong> Start Apache and access <code>http://localhost/filename.rb</code>. If “Hello” prints, you are done!</li>
</ol> <section class="mt-10 border-t pt-6 space-y-8"> <div class="flex flex-wrap gap-3 items-center"> <span class="text-sm text-gray-600">Share:</span> <a class="text-sm px-3 py-1.5 rounded border hover:bg-gray-50" href="https://twitter.com/intent/tweet?text=Running%20Ruby%20via%20Apache&url=https%3A%2F%2Fhirotoyoshidome.github.io%2Fblog%2Fen%2Fposts%2F2018%2Fapache-ruby%2F" rel="noopener">
X (Twitter)
</a> </div> </section> </main>  </body></html>