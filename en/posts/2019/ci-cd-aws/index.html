<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Building CI/CD on AWS</title><meta name="description" content="How I stitched together CodePipeline, CodeBuild, and CodeDeploy to deploy from GitHub to EC2."><!-- OGP --><meta property="og:title" content="Building CI/CD on AWS"><meta name="og:description" content="How I stitched together CodePipeline, CodeBuild, and CodeDeploy to deploy from GitHub to EC2."><meta property="og:type" content="website"><!-- Twitter --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Building CI/CD on AWS"><meta name="twitter:description" content="How I stitched together CodePipeline, CodeBuild, and CodeDeploy to deploy from GitHub to EC2."><link rel="icon" type="image/png" href="/blog/images/favicon.ico"><link rel="stylesheet" href="/blog/_astro/_page_.C60xkf-5.css"></head> <body class="prose prose-neutral mx-auto p-6">  <main class="max-w-3xl mx-auto px-6 py-10 text-gray-800 leading-relaxed"> <nav aria-label="Breadcrumb" class="text-sm text-gray-500 mb-6"> <ol class="flex flex-wrap items-center gap-2 list-none"> <li><a href="/blog/" class="text-blue-600 hover:underline">Home</a></li> <li aria-hidden="true" class="text-gray-400">/</li> <li><a href="/blog/en/" class="text-blue-600 hover:underline">Posts</a></li> <li aria-hidden="true" class="text-gray-400">/</li> <li class="font-semibold text-gray-700 truncate max-w-[60ch]">Building CI/CD on AWS</li> </ol> </nav> <header class="mb-8"> <h1 class="text-4xl font-bold tracking-tight mb-2">Building CI/CD on AWS</h1> <div class="flex flex-wrap items-center gap-3 text-sm text-gray-600"> <time datetime="2019-10-28T00:00:00.000Z"> 2019-10-28 </time> </div> <ul class="flex flex-wrap gap-2 mt-4 list-none"> <li class="text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full font-medium">
#AWS </li><li class="text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full font-medium">
#CI/CD </li><li class="text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full font-medium">
#GitHub </li> </ul> <nav class="text-sm text-gray-600 flex flex-wrap gap-3 mt-4"> <a href="/blog/ja/posts/2019/ci_cd_aws/" class="text-blue-600 hover:underline flex items-center gap-1"> <span aria-hidden="true">⇄</span> 日本語 </a> </nav> </header> <ul>
<li>
<p>2019/10/28
I recently set up a CI/CD pipeline using only AWS services, so here are my notes. I used:</p>
</li>
<li>
<p>CodePipeline</p>
</li>
<li>
<p>CodeBuild</p>
</li>
<li>
<p>CodeDeploy</p>
</li>
</ul>
<p>(CodeCommit would make it all-AWS, but I used GitHub.)</p>
<h2 id="steps">Steps</h2>
<p>I wanted GitHub code to be tested, built, and deployed to EC2. Commit your code to GitHub (I used <code>master</code>, but you can choose any branch). In CodePipeline, create a pipeline via the console. For the Source stage, connect GitHub via a webhook (simple through the UI).</p>
<p>For the Build stage I used CodeBuild, so I added a <code>buildspec.yml</code> to the repo root, e.g.:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>version: 0.2</span></span>
<span class="line"><span>run-as: root</span></span>
<span class="line"><span>phases:</span></span>
<span class="line"><span>  build:</span></span>
<span class="line"><span>    commands:</span></span>
<span class="line"><span>      - # run tests/builds here</span></span>
<span class="line"><span>artifacts:</span></span>
<span class="line"><span>  files:</span></span>
<span class="line"><span>    - '**/*'</span></span>
<span class="line"><span></span></span></code></pre>
<p>Create a build project, point its input artifact to the source output, and pick either an AWS-provided Docker image or your own (push custom images to ECR). Store build artifacts in S3.</p>
<p>For deployment I used CodeDeploy, so I added <code>appspec.yml</code>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>version: 0.0</span></span>
<span class="line"><span>os: linux</span></span>
<span class="line"><span>files:</span></span>
<span class="line"><span>  - source: /</span></span>
<span class="line"><span>    destination: /var/src</span></span>
<span class="line"><span>hooks:</span></span>
<span class="line"><span>  BeforeInstall:</span></span>
<span class="line"><span>    - location: code_deploy/before_install.sh</span></span>
<span class="line"><span>      timeout: 300</span></span>
<span class="line"><span>      runas: root</span></span>
<span class="line"><span>  AfterInstall:</span></span>
<span class="line"><span>    - location: code_deploy/after_install.sh</span></span>
<span class="line"><span>      timeout: 300</span></span>
<span class="line"><span>      runas: root</span></span>
<span class="line"><span></span></span></code></pre>
<p>This example extracts files to <code>/var/src</code> and lets you run scripts before/after install (e.g., adjust permissions). Create a deploy group and set the pipeline to use the artifact produced by CodeBuild.</p>
<h2 id="takeaways">Takeaways</h2>
<p>Even without Jenkins or CircleCI you can build CI/CD purely on AWS. The benefits include consolidated cost management, tight service integration, and pay-as-you-go pricing for CodeBuild. At Japan IT Week I heard someone stress how crucial CI/CD automation is for fast development cycles—I completely agree.</p> <section class="mt-10 border-t pt-6 space-y-8"> <div class="flex flex-wrap gap-3 items-center"> <span class="text-sm text-gray-600">Share:</span> <a class="text-sm px-3 py-1.5 rounded border hover:bg-gray-50" href="https://twitter.com/intent/tweet?text=Building%20CI%2FCD%20on%20AWS&url=https%3A%2F%2Fhirotoyoshidome.github.io%2Fblog%2Fen%2Fposts%2F2019%2Fci-cd-aws%2F" rel="noopener">
X (Twitter)
</a> </div> </section> </main>  </body></html>